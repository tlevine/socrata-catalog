---
title: Kinds of datasets and their licenses in Missouri's data portal
twitter_title: Missouri's data portal has lots of traffic surveys
tags: ['open-data']
---
<% root = 'https://github.com/tlevine/socrata-analysis/tree/master/' %>
```{r configure, echo = F}
opts_chunk$set(fig.width=10, fig.height=10, dpi = 42 * 5)
```

## Which specific datasets have licenses?
I recently [found](/!/open-data-licensing) that most datasets on the
open data portals I've been looking at don't have open licenses.
But a lot of datasets do have licenses, and licensing does vary within
a portal. So I wanted to see which datasets get licenses and which ones
don't. I started looking at this on the Missouri Data Portal, but I
wound up going down a slightly different rabbit hole.

## The Missouri Data Portal
I went about this by looking at one data portal,
[data.mo.gov](https://data.mo.gov). Here's why I chose it.

1. To make it easy to download the license information, I wanted to use
    Socrata's DCAT endpoint. This endpoint only returns up to 1000
    datasets, so I needed a portal with no more than 1000 datasets.
    Missouri's portal has `r nrow(missouri)` datasets.
2. I think I've figured out how to
    [deduplicate federated datasets](/!/),
    but I didn't want to deal with that.
    The Missouri portal federates only the
    [Kansas City data portal](https://data.kcmo.org).
3. Missouri has [a lot of PDF files](/!/),
    so I thought there might be something in there that would be more
    original than mere facts and covered under copyright; this would
    make a license more important.

I wound up categorizing the datasets quite a bit more than I originally
intended, so now I know a lot about the sorts of data on the portal.

## Licenses
Most datasets on the missouri portal are public domain.

```{r publicdomain}
print(p0)
```
Public domain is actually the only license; if a dataset isn't licensed
public domain, it isn't licensed at all.

```{r na_table}
table(missouri$public.domain, is.na(missouri$license))
```

## Formats
Proportionately more PDF files are public domain.

```{r publicdomain_pdf}
print(p1)
```

I noticed a bunch of PDF files with names like these.

* [  SWTWESTP EW 5 HR 2009 A PCW](https://data.mo.gov/d/nfur-xwk2)
* [  SHAWNEEWARD 5 HR 2009 A TMC](https://data.mo.gov/d/5zv3-u47y)
* [PROSPECTSWOPE 5 HR 2009 A TMC](https://data.mo.gov/d/i2ip-cykb)
* [    OAKVOLKER 5 HR 2009 A TMC](https://data.mo.gov/d/6gz3-267n)
* [         OAK9 5 HR 2009 A TMC](https://data.mo.gov/d/yjr5-e96s)
* [        OAK12 5 HR 2009 A TMC](https://data.mo.gov/d/sqpd-738e)
* [       MAIN13 5 HR 2009 A TMC](https://data.mo.gov/d/9ddu-xy68)
* [        MAIN8 5 HR 2009 A TMC](https://data.mo.gov/d/eyii-3nuq)
* [    MADISON43 5 HR 2009 A TMC](https://data.mo.gov/d/n2kq-rg69)

These are all traffic surveys, and it turns out that most PDFs.

```{r pdf_trafficsurvey}
print(p2)
```

## Dataset kinds
A lot of PDF files had public domain licenses, but it's not clear-cut,
so I more specifically at what datasets are on the portal. The only
field in the dataset that really told me much about this was the
`title` field, which is what I used above to find the traffic surveys.
I kept going with that for different datasets.

I just used a bunch of reasonably simple
[string matches](https://github.com/tlevine/socrata-catalog/blob/master/src/missouri.license.r).
For example, a bunch of datasets came from the American Community Survey,
and these said "ACS" or "American Community Survey" in the title.
Data from the federal said "Census". And liquor license data said either
"Liquor" or "Alcohol".

In the plot below, I map out the different kinds of datasets, whether
they are PDF files and whether they have public domain licenses.

```{r kinds}
print(p5)
```

Here's the same plot but with proportions instead of counts. This makes
the small bars more apparent.

```{r kinds}
print(p6)
```

I didn't manage to get it much more precise than this, but 

## Something
Anticlimactically, I don't think this really tells us more about licensing.
On the other hand, I feel like this is a reasonably complete grouping of
the different kinds of datasets. In the less granular groupings, I think
I've arrived at datasets that could naturally be combined into one data
table. This is even true for the traffic survey data; each particular PDF
traffic survey report could be converted into a single row in a data table.

## Future study
In the Missouri portal, I used only title to group datasets; I didn't
look at the long-form description, the author or the schema. There were
pretty clear-cut divisions between titles, but I would like to see how
reasonable this approach really is; I want to whether groups of similarly
named datasets tend to have similar schemas.
